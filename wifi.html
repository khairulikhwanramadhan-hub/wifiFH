<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FH WLAN Generator â€” Khairul</title>

<!-- QR lib (client side) -->
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js" defer></script>

<!-- MOBILE-FIRST STYLES -->
<style>
  :root{
    --bg:#f5f7fa; --card:#ffffff; --muted:#7d8b96; --text:#0f1720;
    --accent:#6f42c1; --accent-2:#5a20a6; --glass:rgba(255,255,255,0.6);
    --success:#2f8f6a;
  }
  @media(prefers-color-scheme:dark){
    :root{
      --bg:#071023; --card:#081226; --muted:#9aa9b8; --text:#e6f0fb; --glass:rgba(10,12,16,0.45)
    }
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#ffffff);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
  .container{max-width:760px;margin:18px auto;padding:12px}
  /* card */
  .card{background:var(--card);border-radius:14px;padding:16px;box-shadow:0 12px 28px rgba(12,15,30,0.06);transition:transform .18s ease,box-shadow .18s ease;overflow:hidden}
  .card:active{transform:translateY(-2px)}
  /* header */
  .head{display:flex;align-items:center;gap:12px}
  .logo{width:54px;height:54px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px;flex:0 0 54px}
  h1{margin:0;font-size:18px}
  .meta{font-size:13px;color:var(--muted)}
  /* form row */
  .form-row{display:flex;gap:10px;margin-top:12px;align-items:center;flex-wrap:wrap}
  .input{flex:1;padding:12px 14px;border-radius:12px;border:1px solid rgba(15,20,30,0.06);font-size:16px;background:transparent;color:var(--text);outline:none}
  .input:focus{box-shadow:0 6px 18px rgba(111,66,193,0.08);border-color:rgba(111,66,193,0.14)}
  .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:12px;border:0;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:10px}
  .btn.ghost{background:transparent;border:1px solid rgba(15,20,30,0.06);color:var(--text)}
  .btn:disabled{opacity:.6;cursor:not-allowed}
  /* output */
  .output{margin-top:14px;padding:12px;border-radius:12px;border:1px solid rgba(15,20,30,0.03);background:linear-gradient(180deg,var(--glass),transparent);display:flex;gap:12px;align-items:center;justify-content:space-between;min-height:62px}
  .left{display:flex;flex-direction:column;gap:8px}
  .result{font-weight:700;font-size:17px}
  .status{font-size:13px;color:var(--muted)}
  .badge{padding:6px 10px;border-radius:999px;background:rgba(111,66,193,0.08);color:var(--accent);font-weight:700;font-size:13px}
  /* qr */
  .qr{width:100px;height:100px;border-radius:10px;border:1px solid rgba(15,20,30,0.03);display:flex;align-items:center;justify-content:center}
  /* mapping & footer */
  .mapping{margin-top:14px;color:var(--muted);font-size:13px}
  .footer{margin-top:14px;text-align:center;color:var(--muted);font-size:13px}
  /* toast */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;background:#111;color:#fff;padding:10px 14px;border-radius:12px;opacity:0;pointer-events:none;transition:opacity .28s}
  .toast.show{opacity:1;pointer-events:auto}
  /* responsive small screens */
  @media(max-width:520px){
    .logo{width:46px;height:46px}
    .qr{width:78px;height:78px}
    .result{font-size:15px}
    h1{font-size:16px}
  }
</style>
</head>
<body>
  <div class="container">
    <div class="card" role="main" aria-label="FH WLAN Generator">
      <div class="head">
        <div class="logo">KH</div>
        <div style="flex:1">
          <h1>FH WLAN Generator</h1>
          <div class="meta">Crafted by <strong>Khairul Ikhwan Ramadhan</strong> Â· <span style="color:var(--muted)">2025 Â· Static</span></div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
          <div style="font-size:12px;color:var(--muted)">v1.3</div>
        </div>
      </div>

      <p class="meta" style="margin-top:12px">Masukkan SSID sumber yang diawali <code>fh_</code>. Contoh: <code>fh_XxXxXx_5G</code></p>

      <div class="form-row">
        <input id="inputField" class="input" type="text" placeholder="fh_XxXxXx_5G" aria-label="SSID input" value="fh_XxXxXx_5G" />
        <button id="generateBtn" class="btn" type="button">Get Passkey</button>
        <button id="copyBtn" class="btn ghost" type="button" disabled>ðŸ“‹ Copy</button>
      </div>

      <div class="output" aria-live="polite">
        <div class="left">
          <div id="outputText" class="result">Output will appear here</div>
          <div style="display:flex;gap:10px;align-items:center">
            <div id="bandBadge" class="badge">band: â€”</div>
            <div id="statusText" class="status">wlan... (live)</div>
          </div>
        </div>
        <div style="display:flex;flex-direction:column;align-items:center;gap:8px">
          <div id="qr" class="qr" aria-hidden="true"></div>
          <div style="font-size:12px;color:var(--muted)">Scan QR untuk connect</div>
        </div>
      </div>

      <div class="mapping" id="mapping">
        <strong>Mapping:</strong> a â†” 5, b â†” 4, c â†” 3, d â†” 2, e â†” 1, f â†” 0, 6 â†” 9, 7 â†” 8
      </div>
    </div>

    <div class="footer">Â© 2025 Khairul Ikhwan Ramadhan â€” <a href="https://github.com/khairulikhwanramadhan-hub/wifiFH" target="_blank" rel="noopener" style="color:var(--accent)">Repo</a></div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

<!-- SCRIPT: logic (safe + mobile friendly) -->
<script>
(function(){
  'use strict';

  /* safe mapping */
  const pairs = [['a','5'],['b','4'],['c','3'],['d','2'],['e','1'],['f','0'],['6','9'],['7','8']];
  const map = Object.create(null);
  for (const [k,v] of pairs){ map[k]=v; map[v]=k; }
  function safeHas(o,k){ return Object.prototype.hasOwnProperty.call(o,k); }

  /* DOM */
  const $ = s => document.querySelector(s);
  const input = $('#inputField');
  const out = $('#outputText');
  const status = $('#statusText');
  const bandBadge = $('#bandBadge');
  const genBtn = $('#generateBtn');
  const copyBtn = $('#copyBtn');
  const qrBox = $('#qr');
  const toast = $('#toast');

  function showToast(msg, t=1100){
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), t);
  }

  /* core */
  function mapChar(c){
    const lower = String(c).toLowerCase();
    return safeHas(map, lower) ? map[lower] : c;
  }
  function generateSSID(s){
    if (!s) return '';
    const t = String(s).trim();
    if (!t.toLowerCase().startsWith('fh_')) return '';
    const parts = t.split('_').filter(Boolean);
    if (parts.length < 2) return '';
    const mid = parts[1];
    return 'wlan' + [...mid].map(mapChar).join('');
  }

  function detectBand(s){
    if (!s) return 'â€”';
    const t = String(s).toLowerCase();
    if (t.includes('_5g')) return '5G';
    if (t.includes('_2.4g') || t.includes('_24g')) return '2.4G';
    return 'Unknown';
  }

  /* QR / payload builder */
  function esc(v){ return String(v).replace(/([\\;,:"])/g,'\\$1') }
  function makeWifiPayload(ssid, pass, type='WPA'){ return `WIFI:T:${type};S:${esc(ssid)};P:${esc(pass)};;` }

  function renderQR(text){
    // clear
    qrBox.innerHTML = '';
    if (!text) return;
    if (window.QRCode && typeof QRCode.toCanvas === 'function'){
      // generate canvas
      try {
        QRCode.toCanvas(text, { width: qrBox.clientWidth - 8, margin:0 }, function(err, canvas){
          if (err){ console.error(err); qrBox.textContent = 'QR err'; return; }
          qrBox.appendChild(canvas);
        });
      } catch(e){ qrBox.textContent = 'QR'; console.error(e) }
    } else {
      // fallback: plain text preview
      qrBox.textContent = text.slice(0,24) + '...';
    }
  }

  /* UI update */
  function updateLive(){
    const val = input.value;
    const live = generateSSID(val);
    status.textContent = live || 'wlan... (live)';
    const band = detectBand(val);
    bandBadge.textContent = band === 'Unknown' ? 'band: â€”' : 'band: ' + band;
    // show small live preview in QR placeholder if exist
    if (live) renderQR(makeWifiPayload(live, live, 'WPA'));
    else renderQR('');
  }

  input.addEventListener('input', updateLive);

  genBtn.addEventListener('click', function(){
    genBtn.disabled = true;
    genBtn.textContent = 'Processing...';
    setTimeout(function(){
      const res = generateSSID(input.value);
      out.textContent = res || 'Invalid input';
      copyBtn.disabled = !res;
      // update QR / badge
      updateLive();
      genBtn.disabled = false;
      genBtn.textContent = 'Get Passkey';
      showToast(res ? 'Passkey generated' : 'Invalid input');
    }, 140);
  });

  // copy handler with fallback
  copyBtn.addEventListener('click', async function(){
    const txt = out.textContent || '';
    if (!txt || txt === 'Invalid input' || txt === 'Output will appear here') return;
    try {
      await navigator.clipboard.writeText(txt);
      showToast('Copied to clipboard');
    } catch (err){
      const ta = document.createElement('textarea');
      ta.value = txt;
      document.body.appendChild(ta);
      ta.select();
      try {
        document.execCommand('copy');
        showToast('Copied (fallback)');
      } catch(e){
        showToast('Copy failed');
      }
      document.body.removeChild(ta);
    }
  });

  // allow Enter key to generate
  input.addEventListener('keydown', function(e){
    if (e.key === 'Enter'){ e.preventDefault(); genBtn.click(); }
  });

  // initial
  updateLive();

})();
</script>
</body>
</html>function safeHas(o,k){ return Object.prototype.hasOwnProperty.call(o,k) }

/* ---------- helpers ---------- */
const $ = sel => document.querySelector(sel);
const input = $('#inputField');
const out = $('#outputText');
const live = $('#statusText');
const bandBadge = $('#bandBadge');
const genBtn = $('#generateBtn');
const copyBtn = $('#copyBtn');
const qrBox = $('#qr');
const toast = $('#toast');

function showToast(msg, time=1200){
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(()=>toast.classList.remove('show'), time);
}

/* ---------- core generate ---------- */
function mapChar(c){
  const lower = String(c).toLowerCase();
  return safeHas(map, lower) ? map[lower] : c;
}

function generateSSID(s){
  if (!s) return '';
  const t = String(s).trim();
  if (!t.toLowerCase().startsWith('fh_')) return '';
  const parts = t.split('_').filter(Boolean);
  if (parts.length < 2) return '';
  const mid = parts[1];
  return 'wlan' + [...mid].map(mapChar).join('');
}

/* ---------- detect band from SSID ---------- */
function detectBand(s){
  if (!s) return 'Unknown';
  const t = String(s).toLowerCase();
  if (t.includes('_5g')) return '5G';
  if (t.includes('_2.4g') || t.includes('_24g')) return '2.4G';
  return 'Unknown';
}

/* ---------- QR: make WiFi QR payload (WPA) ---------- */
function makeWifiPayload(ssid, password, status='WPA'){
  // payload format: WIFI:T:WPA;S:SSID;P:password;;
  // If no password (open), use T:nopass
  const esc = v => String(v).replace(/([\\;,:"])/g,'\\$1');
  const t = status ? status : 'WPA';
  return `WIFI:T:${t};S:${esc(ssid)};P:${esc(password)};;`;
}

/* ---------- render QR (uses QRCode lib if available) ---------- */
function renderQR(text){
  if (!window.QRCode) {
    // fallback: show plain text
    qrBox.textContent = text.slice(0,28)+'...';
    return;
  }
  qrBox.innerHTML = '';
  QRCode.toCanvas(text, { width: 120, margin: 0 }, function (err, canvas) {
    if (err) {
      qrBox.textContent = 'QR error';
      console.error(err);
      return;
    }
    qrBox.appendChild(canvas);
  });
}

/* ---------- UI interactions ---------- */
function updateLivePreview(){
  const val = input.value;
  const liveText = generateSSID(val) || 'wlan... (live)';
  live.textContent = liveText;
  const b = detectBand(val);
  bandBadge.textContent = b === 'Unknown' ? 'band: â€”' : `band: ${b}`;
}

input.addEventListener('input', ()=>{
  updateLivePreview();
});

genBtn.addEventListener('click', async () => {
  genBtn.disabled = true;
  genBtn.textContent = 'Processing...';
  // tiny debounce to show animation
  setTimeout(() => {
    const result = generateSSID(input.value);
    out.textContent = result || 'Invalid input';
    // update copy button state
    copyBtn.disabled = !result;
    // status badge
    const band = detectBand(input.value);
    bandBadge.textContent = band === 'Unknown' ? 'band: â€”' : `band: ${band}`;
    // generate QR code payload for WiFi connection (we use result as SSID + assume no password)
    if (result) {
      // NOTE: We don't know the real WPA password; use the generated SSID as example passkey so QR is connectable only if that is the actual PSK.
      const wifiPass = result; // uses passkey same as generated for demo; change if you have real pass
      const payload = makeWifiPayload(result, wifiPass, 'WPA');
      renderQR(payload);
    } else {
      qrBox.innerHTML = '';
    }
    genBtn.disabled = false;
    genBtn.textContent = 'Get Passkey';
    showToast(result ? 'Passkey generated' : 'Invalid input');
  }, 120);
});

/* copy with clipboard API + fallback */
copyBtn.addEventListener('click', async () => {
  const text = out.textContent || '';
  if (!text || text === 'Invalid input' || text === 'Output will appear here') return;
  try {
    await navigator.clipboard.writeText(text);
    showToast('Copied to clipboard');
  } catch (err) {
    // fallback
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    try {
      document.execCommand('copy');
      showToast('Copied (fallback)');
    } catch (e) {
      showToast('Copy failed');
    }
    document.body.removeChild(ta);
  }
});

/* accessibility: enter key */
input.addEventListener('keydown', (ev) => {
  if (ev.key === 'Enter') {
    ev.preventDefault();
    genBtn.click();
  }
});

/* initial render */
updateLivePreview();
renderQR(''); // empty QR placeholder
</script>
</body>
</html>  setTimeout(() => {
    const result = generateSSID(inputField.value);
    outputText.textContent = result || 'Invalid input';
    copyBtn.disabled = !result;
    // restore button
    generateBtn.disabled = false;
    generateBtn.textContent = 'Get Passkey';
  }, 120);
});

/* copy handler with fallback */
copyBtn.addEventListener('click', async () => {
  const text = outputText.textContent || '';
  if (!text || text === 'Invalid input' || text === 'Output will appear here') return;
  try {
    await navigator.clipboard.writeText(text);
    copyBtn.textContent = 'Copied âœ…';
    setTimeout(()=>copyBtn.textContent = 'ðŸ“‹ Copy',900);
  } catch (err) {
    // fallback textarea copy
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    try {
      document.execCommand('copy');
      copyBtn.textContent = 'Copied âœ…';
    } catch(e) {
      copyBtn.textContent = 'Copy failed';
    }
    document.body.removeChild(ta);
    setTimeout(()=>copyBtn.textContent = 'ðŸ“‹ Copy',900);
  }
});

/* accessibility: allow Enter key to trigger generate */
inputField.addEventListener('keydown', (ev) => {
  if (ev.key === 'Enter') {
    ev.preventDefault();
    generateBtn.click();
  }
});
</script>
</body>
</html>
