<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FH WLAN Generator â€“ Khairul</title>

<style>
    body {
        margin: 0;
        font-family: system-ui, sans-serif;
        background: #0f0f13;
        color: #f0f0f0;
    }
    .card {
        max-width: 600px;
        margin: 20px auto;
        background: #1b1b22;
        padding: 20px;
        border-radius: 16px;
        box-shadow: 0 0 15px #0008;
    }
    .title {
        font-size: 1.7rem;
        font-weight: 700;
        margin-bottom: 8px;
    }
    .sub {
        opacity: 0.8;
        margin-bottom: 18px;
    }
    input {
        width: 100%;
        padding: 14px;
        border-radius: 12px;
        border: none;
        font-size: 1rem;
        margin-bottom: 12px;
    }
    button {
        width: 100%;
        padding: 14px;
        border-radius: 12px;
        border: none;
        font-size: 1.1rem;
        font-weight: 600;
        margin-top: 6px;
        cursor: pointer;
        background: #7a4bff;
        color: white;
    }
    button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
    .copy {
        background: #30303a;
        margin-top: 10px;
    }
    .outputBox {
        background: #26262e;
        padding: 16px;
        border-radius: 12px;
        margin-top: 14px;
        font-size: 1.1rem;
        word-break: break-all;
    }
    .map {
        margin-top: 20px;
        opacity: 0.75;
        font-size: .9rem;
        line-height: 1.5rem;
    }
</style>
</head>

<body>

<div class="card">
    <div class="title">FH WLAN Generator</div>
    <div class="sub">Crafted by <b>Khairul Ikhwan Ramadhan</b> Â· 2025</div>

    <input id="ssid" placeholder="Contoh: fh_XxXxXx_5G">

    <button id="genBtn">Get Passkey</button>
    <button id="copyBtn" class="copy" disabled>Copy</button>

    <div id="out" class="outputBox">Output will appear here</div>

    <div class="map">
        <b>Mapping:</b> a â†” 5, b â†” 4, c â†” 3, d â†” 2, e â†” 1, f â†” 0,  
        6 â†” 9, 7 â†” 8
    </div>
</div>

<script>
function generateSSID(input) {
    if (!input.startsWith("fh_")) return null;

    // ambil middle part sebelum _5G / _2G
    const mid = input.replace("fh_", "").replace("_5G", "").replace("_2G", "");

    const table = {a:"5",b:"4",c:"3",d:"2",e:"1",f:"0","6":"9","7":"8",
                   "5":"a","4":"b","3":"c","2":"d","1":"e","0":"f","9":"6","8":"7"};

    let out = "";
    for (const ch of mid) out += table[ch.toLowerCase()] ?? ch;

    return "wlan" + out;
}

const ssid = document.getElementById("ssid");
const outBox = document.getElementById("out");
const genBtn = document.getElementById("genBtn");
const copyBtn = document.getElementById("copyBtn");

genBtn.onclick = () => {
    const val = ssid.value.trim();
    const result = generateSSID(val);
    if (!result) {
        outBox.textContent = "Invalid input";
        copyBtn.disabled = true;
        return;
    }
    outBox.textContent = result;
    copyBtn.disabled = false;
};

copyBtn.onclick = async () => {
    try {
        await navigator.clipboard.writeText(outBox.textContent);
        copyBtn.textContent = "Copied!";
        setTimeout(() => copyBtn.textContent = "Copy", 800);
    } catch {
        copyBtn.textContent = "Failed";
        setTimeout(() => copyBtn.textContent = "Copy", 800);
    }
};
</script>

</body>
</html>
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

<!-- SCRIPT: logic (safe + mobile friendly) -->
<script>
(function(){
  'use strict';

  /* safe mapping */
  const pairs = [['a','5'],['b','4'],['c','3'],['d','2'],['e','1'],['f','0'],['6','9'],['7','8']];
  const map = Object.create(null);
  for (const [k,v] of pairs){ map[k]=v; map[v]=k; }
  function safeHas(o,k){ return Object.prototype.hasOwnProperty.call(o,k); }

  /* DOM */
  const $ = s => document.querySelector(s);
  const input = $('#inputField');
  const out = $('#outputText');
  const status = $('#statusText');
  const bandBadge = $('#bandBadge');
  const genBtn = $('#generateBtn');
  const copyBtn = $('#copyBtn');
  const qrBox = $('#qr');
  const toast = $('#toast');

  function showToast(msg, t=1100){
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), t);
  }

  /* core */
  function mapChar(c){
    const lower = String(c).toLowerCase();
    return safeHas(map, lower) ? map[lower] : c;
  }
  function generateSSID(s){
    if (!s) return '';
    const t = String(s).trim();
    if (!t.toLowerCase().startsWith('fh_')) return '';
    const parts = t.split('_').filter(Boolean);
    if (parts.length < 2) return '';
    const mid = parts[1];
    return 'wlan' + [...mid].map(mapChar).join('');
  }

  function detectBand(s){
    if (!s) return 'â€”';
    const t = String(s).toLowerCase();
    if (t.includes('_5g')) return '5G';
    if (t.includes('_2.4g') || t.includes('_24g')) return '2.4G';
    return 'Unknown';
  }

  /* QR / payload builder */
  function esc(v){ return String(v).replace(/([\\;,:"])/g,'\\$1') }
  function makeWifiPayload(ssid, pass, type='WPA'){ return `WIFI:T:${type};S:${esc(ssid)};P:${esc(pass)};;` }

  function renderQR(text){
    // clear
    qrBox.innerHTML = '';
    if (!text) return;
    if (window.QRCode && typeof QRCode.toCanvas === 'function'){
      // generate canvas
      try {
        QRCode.toCanvas(text, { width: qrBox.clientWidth - 8, margin:0 }, function(err, canvas){
          if (err){ console.error(err); qrBox.textContent = 'QR err'; return; }
          qrBox.appendChild(canvas);
        });
      } catch(e){ qrBox.textContent = 'QR'; console.error(e) }
    } else {
      // fallback: plain text preview
      qrBox.textContent = text.slice(0,24) + '...';
    }
  }

  /* UI update */
  function updateLive(){
    const val = input.value;
    const live = generateSSID(val);
    status.textContent = live || 'wlan... (live)';
    const band = detectBand(val);
    bandBadge.textContent = band === 'Unknown' ? 'band: â€”' : 'band: ' + band;
    // show small live preview in QR placeholder if exist
    if (live) renderQR(makeWifiPayload(live, live, 'WPA'));
    else renderQR('');
  }

  input.addEventListener('input', updateLive);

  genBtn.addEventListener('click', function(){
    genBtn.disabled = true;
    genBtn.textContent = 'Processing...';
    setTimeout(function(){
      const res = generateSSID(input.value);
      out.textContent = res || 'Invalid input';
      copyBtn.disabled = !res;
      // update QR / badge
      updateLive();
      genBtn.disabled = false;
      genBtn.textContent = 'Get Passkey';
      showToast(res ? 'Passkey generated' : 'Invalid input');
    }, 140);
  });

  // copy handler with fallback
  copyBtn.addEventListener('click', async function(){
    const txt = out.textContent || '';
    if (!txt || txt === 'Invalid input' || txt === 'Output will appear here') return;
    try {
      await navigator.clipboard.writeText(txt);
      showToast('Copied to clipboard');
    } catch (err){
      const ta = document.createElement('textarea');
      ta.value = txt;
      document.body.appendChild(ta);
      ta.select();
      try {
        document.execCommand('copy');
        showToast('Copied (fallback)');
      } catch(e){
        showToast('Copy failed');
      }
      document.body.removeChild(ta);
    }
  });

  // allow Enter key to generate
  input.addEventListener('keydown', function(e){
    if (e.key === 'Enter'){ e.preventDefault(); genBtn.click(); }
  });

  // initial
  updateLive();

})();
</script>
</body>
</html>function safeHas(o,k){ return Object.prototype.hasOwnProperty.call(o,k) }

/* ---------- helpers ---------- */
const $ = sel => document.querySelector(sel);
const input = $('#inputField');
const out = $('#outputText');
const live = $('#statusText');
const bandBadge = $('#bandBadge');
const genBtn = $('#generateBtn');
const copyBtn = $('#copyBtn');
const qrBox = $('#qr');
const toast = $('#toast');

function showToast(msg, time=1200){
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(()=>toast.classList.remove('show'), time);
}

/* ---------- core generate ---------- */
function mapChar(c){
  const lower = String(c).toLowerCase();
  return safeHas(map, lower) ? map[lower] : c;
}

function generateSSID(s){
  if (!s) return '';
  const t = String(s).trim();
  if (!t.toLowerCase().startsWith('fh_')) return '';
  const parts = t.split('_').filter(Boolean);
  if (parts.length < 2) return '';
  const mid = parts[1];
  return 'wlan' + [...mid].map(mapChar).join('');
}

/* ---------- detect band from SSID ---------- */
function detectBand(s){
  if (!s) return 'Unknown';
  const t = String(s).toLowerCase();
  if (t.includes('_5g')) return '5G';
  if (t.includes('_2.4g') || t.includes('_24g')) return '2.4G';
  return 'Unknown';
}

/* ---------- QR: make WiFi QR payload (WPA) ---------- */
function makeWifiPayload(ssid, password, status='WPA'){
  // payload format: WIFI:T:WPA;S:SSID;P:password;;
  // If no password (open), use T:nopass
  const esc = v => String(v).replace(/([\\;,:"])/g,'\\$1');
  const t = status ? status : 'WPA';
  return `WIFI:T:${t};S:${esc(ssid)};P:${esc(password)};;`;
}

/* ---------- render QR (uses QRCode lib if available) ---------- */
function renderQR(text){
  if (!window.QRCode) {
    // fallback: show plain text
    qrBox.textContent = text.slice(0,28)+'...';
    return;
  }
  qrBox.innerHTML = '';
  QRCode.toCanvas(text, { width: 120, margin: 0 }, function (err, canvas) {
    if (err) {
      qrBox.textContent = 'QR error';
      console.error(err);
      return;
    }
    qrBox.appendChild(canvas);
  });
}

/* ---------- UI interactions ---------- */
function updateLivePreview(){
  const val = input.value;
  const liveText = generateSSID(val) || 'wlan... (live)';
  live.textContent = liveText;
  const b = detectBand(val);
  bandBadge.textContent = b === 'Unknown' ? 'band: â€”' : `band: ${b}`;
}

input.addEventListener('input', ()=>{
  updateLivePreview();
});

genBtn.addEventListener('click', async () => {
  genBtn.disabled = true;
  genBtn.textContent = 'Processing...';
  // tiny debounce to show animation
  setTimeout(() => {
    const result = generateSSID(input.value);
    out.textContent = result || 'Invalid input';
    // update copy button state
    copyBtn.disabled = !result;
    // status badge
    const band = detectBand(input.value);
    bandBadge.textContent = band === 'Unknown' ? 'band: â€”' : `band: ${band}`;
    // generate QR code payload for WiFi connection (we use result as SSID + assume no password)
    if (result) {
      // NOTE: We don't know the real WPA password; use the generated SSID as example passkey so QR is connectable only if that is the actual PSK.
      const wifiPass = result; // uses passkey same as generated for demo; change if you have real pass
      const payload = makeWifiPayload(result, wifiPass, 'WPA');
      renderQR(payload);
    } else {
      qrBox.innerHTML = '';
    }
    genBtn.disabled = false;
    genBtn.textContent = 'Get Passkey';
    showToast(result ? 'Passkey generated' : 'Invalid input');
  }, 120);
});

/* copy with clipboard API + fallback */
copyBtn.addEventListener('click', async () => {
  const text = out.textContent || '';
  if (!text || text === 'Invalid input' || text === 'Output will appear here') return;
  try {
    await navigator.clipboard.writeText(text);
    showToast('Copied to clipboard');
  } catch (err) {
    // fallback
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    try {
      document.execCommand('copy');
      showToast('Copied (fallback)');
    } catch (e) {
      showToast('Copy failed');
    }
    document.body.removeChild(ta);
  }
});

/* accessibility: enter key */
input.addEventListener('keydown', (ev) => {
  if (ev.key === 'Enter') {
    ev.preventDefault();
    genBtn.click();
  }
});

/* initial render */
updateLivePreview();
renderQR(''); // empty QR placeholder
</script>
</body>
</html>  setTimeout(() => {
    const result = generateSSID(inputField.value);
    outputText.textContent = result || 'Invalid input';
    copyBtn.disabled = !result;
    // restore button
    generateBtn.disabled = false;
    generateBtn.textContent = 'Get Passkey';
  }, 120);
});

/* copy handler with fallback */
copyBtn.addEventListener('click', async () => {
  const text = outputText.textContent || '';
  if (!text || text === 'Invalid input' || text === 'Output will appear here') return;
  try {
    await navigator.clipboard.writeText(text);
    copyBtn.textContent = 'Copied âœ…';
    setTimeout(()=>copyBtn.textContent = 'ðŸ“‹ Copy',900);
  } catch (err) {
    // fallback textarea copy
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    try {
      document.execCommand('copy');
      copyBtn.textContent = 'Copied âœ…';
    } catch(e) {
      copyBtn.textContent = 'Copy failed';
    }
    document.body.removeChild(ta);
    setTimeout(()=>copyBtn.textContent = 'ðŸ“‹ Copy',900);
  }
});

/* accessibility: allow Enter key to trigger generate */
inputField.addEventListener('keydown', (ev) => {
  if (ev.key === 'Enter') {
    ev.preventDefault();
    generateBtn.click();
  }
});
</script>
</body>
</html>
