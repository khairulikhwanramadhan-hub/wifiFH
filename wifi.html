<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>FH WLAN Generator â€” Khairul</title>
<!-- Minimal inline CSS for speed -->
<style>
  :root{--accent:#6f42c1;--muted:#9fa8b3;--bg:#f6f8fb}
  html,body{height:100%;margin:0;background:var(--bg);font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;color:#111}
  .wrap{max-width:720px;margin:28px auto;padding:18px}
  .card{background:#fff;border-radius:14px;padding:18px;box-shadow:0 10px 30px rgba(20,20,40,0.06)}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:54px;height:54px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#5a20a6);display:inline-flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px}
  h1{font-size:20px;margin:0}
  .muted{color:var(--muted);font-size:13px}
  .input{width:100%;padding:12px 14px;font-size:18px;border-radius:10px;border:1px solid #e6e9ef;margin-top:14px;box-sizing:border-box}
  .controls{display:flex;gap:10px;align-items:center;margin-top:12px;flex-wrap:wrap}
  .btn{background:var(--accent);color:#fff;padding:12px 18px;border-radius:10px;border:0;font-weight:600;cursor:pointer}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .icon-btn{background:#fff;border:1px solid #e6e9ef;padding:10px;border-radius:10px;cursor:pointer}
  .output{margin-top:14px;padding:14px;border-radius:10px;border:1px solid #eef2f6;background:#f8fbfb;min-height:48px;display:flex;align-items:center;justify-content:space-between}
  .small{font-size:13px;color:var(--muted)}
  .mapping{margin-top:14px;color:var(--muted);font-size:13px}
  @media(max-width:520px){.wrap{padding:12px}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-label="FH WLAN Generator">
      <div class="brand">
        <div class="logo">KH</div>
        <div>
          <h1>FH WLAN Generator</h1>
          <div class="muted">Crafted by <strong>Khairul Ikhwan Ramadhan</strong></div>
        </div>
        <div style="flex:1"></div>
        <div class="small muted">2025 Â· Static</div>
      </div>

      <p class="small muted" style="margin-top:12px">Masukkan SSID sumber yang diawali <code>fh_</code>. Contoh: <code>fh_XxXxXx_5G</code></p>

      <input id="inputField" class="input" type="text" value="fh_XxXxXx_5G" aria-label="SSID input" />

      <div class="controls">
        <button id="generateBtn" class="btn" type="button">Get Passkey</button>
        <button id="copyBtn" class="icon-btn" title="Copy result" disabled>ðŸ“‹ Copy</button>
      </div>

      <div id="output" class="output">
        <div id="outputText" class="small">Output will appear here</div>
        <div id="livePreview" class="small" style="color:#777">wlan... (live)</div>
      </div>

      <div class="mapping">
        <strong>Mapping:</strong> a â†” 5, b â†” 4, c â†” 3, d â†” 2, e â†” 1, f â†” 0, 6 â†” 9, 7 â†” 8
      </div>
    </div>
  </div>

<script>
/* Safe mapping + robust hasOwnProperty check */
const pairs = [['a','5'],['b','4'],['c','3'],['d','2'],['e','1'],['f','0'],['6','9'],['7','8']];
const map = Object.create(null); // intentionally no prototype
for (const [k,v] of pairs) { map[k] = v; map[v] = k; }

/* safeHas: use Object.prototype.hasOwnProperty.call to avoid missing method */
function safeHas(o, key){ return Object.prototype.hasOwnProperty.call(o, key); }

function mapChar(c){
  const lower = String(c).toLowerCase();
  return safeHas(map, lower) ? map[lower] : c;
}

function generateSSID(input){
  if (!input) return '';
  try {
    const s = String(input).trim();
    if (!s.toLowerCase().startsWith('fh_')) return '';
    const parts = s.split('_').filter(Boolean);
    if (parts.length < 2) return '';
    const middle = parts[1];
    const converted = [...middle].map(mapChar).join('');
    return 'wlan' + converted;
  } catch(e) {
    console.error('generateSSID error', e);
    return '';
  }
}

/* DOM hooks */
const inputField = document.getElementById('inputField');
const outputText = document.getElementById('outputText');
const livePreview = document.getElementById('livePreview');
const generateBtn = document.getElementById('generateBtn');
const copyBtn = document.getElementById('copyBtn');

inputField.addEventListener('input', () => {
  const live = generateSSID(inputField.value);
  livePreview.textContent = live || 'wlan... (live)';
});

/* Click handler with short simulated processing and robust behavior */
generateBtn.addEventListener('click', () => {
  generateBtn.disabled = true;
  generateBtn.textContent = 'Processing...';
  // small timeout to simulate work and avoid blocking UI
  setTimeout(() => {
    const result = generateSSID(inputField.value);
    outputText.textContent = result || 'Invalid input';
    copyBtn.disabled = !result;
    // restore button
    generateBtn.disabled = false;
    generateBtn.textContent = 'Get Passkey';
  }, 120);
});

/* copy handler with fallback */
copyBtn.addEventListener('click', async () => {
  const text = outputText.textContent || '';
  if (!text || text === 'Invalid input' || text === 'Output will appear here') return;
  try {
    await navigator.clipboard.writeText(text);
    copyBtn.textContent = 'Copied âœ…';
    setTimeout(()=>copyBtn.textContent = 'ðŸ“‹ Copy',900);
  } catch (err) {
    // fallback textarea copy
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    try {
      document.execCommand('copy');
      copyBtn.textContent = 'Copied âœ…';
    } catch(e) {
      copyBtn.textContent = 'Copy failed';
    }
    document.body.removeChild(ta);
    setTimeout(()=>copyBtn.textContent = 'ðŸ“‹ Copy',900);
  }
});

/* accessibility: allow Enter key to trigger generate */
inputField.addEventListener('keydown', (ev) => {
  if (ev.key === 'Enter') {
    ev.preventDefault();
    generateBtn.click();
  }
});
</script>
</body>
</html>
